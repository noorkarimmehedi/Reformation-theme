{%- comment -%}
----------------------------------------------------------------------------------------------------------------------
PRODUCT CARD COMPONENT - Reformation Theme Compatible
----------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}

<style>
  .product-card__aside {
    display: none !important;
  }

  /* Product Card Border & Shadow Styling */
  .product-card {
    border: 1px solid #E0E0E0 !important;
    border-radius: 4px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0) !important;
    transition: border-color 0.3s ease, box-shadow 0.3s ease !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
  }
  
  .product-card:hover {
    border-color: #CCCCCC !important;
  }
  
  .product-card__figure {
    border-radius: 4px 4px 0 0 !important;
    flex-shrink: 0 !important;
    position: relative !important;
  }
  
  .product-card__figure img {
    border-radius: 4px 4px 0 0 !important;
    width: 100% !important;
    height: auto !important;
    display: block !important;
  }
  
  .product-card__info {
    padding: 12px !important;
    display: flex !important;
    flex-direction: column !important;
    flex-grow: 1 !important;
  }
  
  /* Price alignment fix for consistent layout */
  .product-card__info .price-list {
    min-height: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 8px !important;
    margin: 8px 0 !important;
  }
  
  .product-card__info--center .price-list {
    justify-content: center !important;
  }

  .price-list .price {
    font-weight: 600 !important;
    font-size: 16px !important;
  }

  .price-list .price--on-sale {
    color: #D50000 !important;
  }

  .price-list .price--compare {
    color: #999999 !important;
    font-size: 14px !important;
    font-weight: 400 !important;
  }
  
  /* Ensure consistent spacing for product title */
  .product-card__title {
    min-height: 40px !important;
    display: block !important;
    margin: 8px 0 !important;
  }
  
  .product-card__title a {
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    line-height: 1.4 !important;
    max-height: calc(1.4em * 2) !important;
    color: inherit !important;
    text-decoration: none !important;
  }

  /* Content wrapper to push button to bottom */
  .product-card__content {
    flex-grow: 1 !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Add to Cart Button Container - always at bottom */
  .product-card__add-to-cart {
    margin-top: auto !important;
    padding-top: 12px !important;
    width: 100% !important;
  }

  .product-card__add-to-cart-btn {
    position: relative !important;
    width: 100% !important;
    padding: 10px 16px !important;
    outline: none !important;
    text-decoration: none !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    cursor: pointer !important;
    text-transform: uppercase !important;
    background-color: #D50000 !important;
    border: 1px solid #E0E0E0 !important;
    border-radius: 0 !important;
    color: #ffffff !important;
    font-weight: 500 !important;
    font-size: 14px !important;
    letter-spacing: 0.7px !important;
    text-align: center !important;
    font-family: inherit !important;
    z-index: 0 !important;
    overflow: hidden !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0) !important;
    transition: all 0.3s cubic-bezier(0.02, 0.01, 0.47, 1) !important;
  }

  .product-card__add-to-cart-btn:hover {
    border-color: #CCCCCC !important;
    animation: rotate624 0.7s ease-in-out both !important;
  }

  @keyframes rotate624 {
    0% {
      transform: rotate(0deg) translate3d(0, 0, 0);
    }
    25% {
      transform: rotate(3deg) translate3d(0, 0, 0);
    }
    50% {
      transform: rotate(-3deg) translate3d(0, 0, 0);
    }
    75% {
      transform: rotate(1deg) translate3d(0, 0, 0);
    }
    100% {
      transform: rotate(0deg) translate3d(0, 0, 0);
    }
  }

  @keyframes storm1261 {
    0% {
      transform: translate3d(0, 0, 0) translateZ(0);
    }
    25% {
      transform: translate3d(4px, 0, 0) translateZ(0);
    }
    50% {
      transform: translate3d(-3px, 0, 0) translateZ(0);
    }
    75% {
      transform: translate3d(2px, 0, 0) translateZ(0);
    }
    100% {
      transform: translate3d(0, 0, 0) translateZ(0);
    }
  }

  .product-card__add-to-cart-btn span {
    color: #ffffff !important;
    z-index: 20 !important;
    animation: storm1261 0.7s ease-in-out both !important;
    animation-delay: 0.06s !important;
  }

  .product-card__add-to-cart-btn:after {
    background: #38ef7d !important;
    content: "" !important;
    height: 155px !important;
    left: -75px !important;
    opacity: 0.4 !important;
    position: absolute !important;
    top: -50px !important;
    transform: rotate(35deg) !important;
    transition: all 550ms cubic-bezier(0.19, 1, 0.22, 1) !important;
    width: 50px !important;
    z-index: -10 !important;
  }

  .product-card__add-to-cart-btn:hover:after {
    left: 120% !important;
    transition: all 550ms cubic-bezier(0.19, 1, 0.22, 1) !important;
  }

  .product-card__add-to-cart-btn:disabled {
    background-color: #cccccc !important;
    cursor: not-allowed !important;
    opacity: 0.6 !important;
  }

  .product-card__add-to-cart-btn--unavailable {
    background-color: #999999 !important;
    cursor: not-allowed !important;
  }
  
  /* Mobile specific adjustments */
  @media (max-width: 699px) {
    .product-card__info .price-list {
      flex-wrap: wrap !important;
      gap: 4px !important;
    }
    
    .product-card__title {
      min-height: 44px !important;
      font-size: 14px !important;
    }

    .product-card__add-to-cart-btn {
      padding: 8px 12px !important;
      font-size: 13px !important;
    }
  }
</style>

<div class="product-card">
  {%- comment -%}
  --------------------------------------------------------------------------------------------------------------------
  PRODUCT MEDIA
  --------------------------------------------------------------------------------------------------------------------
  {%- endcomment -%}

  {%- if product.featured_media -%}
    <div class="product-card__figure">
      <a href="{{ product.url }}">
        <img 
          src="{{ product.featured_media | img_url: '600x' }}" 
          alt="{{ product.featured_media.alt | escape }}"
          loading="lazy"
        >
      </a>
    </div>
  {%- endif -%}

  {%- comment -%}
  --------------------------------------------------------------------------------------------------------------------
  PRODUCT INFO
  --------------------------------------------------------------------------------------------------------------------
  {%- endcomment -%}

  <div class="product-card__info">
    <div class="product-card__content">
      
      {%- comment -%}PRODUCT TITLE{%- endcomment -%}
      <div class="product-card__title">
        <a href="{{ product.url }}">{{ product.title }}</a>
      </div>

      {%- comment -%}PRODUCT VENDOR{%- endcomment -%}
      {%- if product.vendor != blank -%}
        <div class="product-card__vendor" style="font-size: 12px; color: #666; margin: 4px 0;">
          {{ product.vendor }}
        </div>
      {%- endif -%}

      {%- comment -%}PRICE{%- endcomment -%}
      <div class="price-list">
        {%- if product.price_varies -%}
          <span class="price">From {{ product.price_min | money }}</span>
        {%- else -%}
          {%- if product.compare_at_price > product.price -%}
            <span class="price price--on-sale">{{ product.price | money }}</span>
            <s class="price price--compare">{{ product.compare_at_price | money }}</s>
          {%- else -%}
            <span class="price">{{ product.price | money }}</span>
          {%- endif -%}
        {%- endif -%}
      </div>
    </div>

    {%- comment -%}
    --------------------------------------------------------------------------------------------------------------------
    ADD TO CART BUTTON
    --------------------------------------------------------------------------------------------------------------------
    {%- endcomment -%}
    
    <div class="product-card__add-to-cart">
      {%- if product.available -%}
        {%- if product.variants.size == 1 -%}
          {%- comment -%} Single variant - direct add to cart {%- endcomment -%}
          <form action="/cart/add" method="post" enctype="multipart/form-data">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            <button type="submit" class="product-card__add-to-cart-btn">
              <span>Add to Cart</span>
            </button>
          </form>
        {%- else -%}
          {%- comment -%} Multiple variants - link to product page {%- endcomment -%}
          <a href="{{ product.url }}" class="product-card__add-to-cart-btn">
            <span>Select Options</span>
          </a>
        {%- endif -%}
      {%- else -%}
        <button type="button" class="product-card__add-to-cart-btn product-card__add-to-cart-btn--unavailable" disabled>
          <span>Sold Out</span>
        </button>
      {%- endif -%}
    </div>
  </div>
</div>