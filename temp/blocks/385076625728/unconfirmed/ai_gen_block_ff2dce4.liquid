{% doc %}
  @prompt
    build me a featured collection section where there should be two product in one row in mobile version and in desktop version there should be four products. the product name compared pricing and pricing and add to cart button color text background color should be customizable, i want just the product title pricing and add to cart button card should be customizable from color to size not whole section, in every prooduct card the title pricing and add to cart button should be in same position on mobile version so that it look beautiful, the pricing still not in same position in every product card. also i don't want any border radius in product photo
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-featured-collection-{{ ai_gen_id }} {
    padding: 40px 20px;
    background-color: {{ block.settings.section_background }};
  }

  .ai-featured-collection__header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 40px;
  }

  .ai-featured-collection__title-{{ ai_gen_id }} {
    font-size: 32px;
    margin: 0;
    color: {{ block.settings.heading_color }};
  }

  .ai-featured-collection__grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    max-width: 1400px;
    margin: 0 auto;
  }

  @media screen and (min-width: 750px) {
    .ai-featured-collection__grid-{{ ai_gen_id }} {
      grid-template-columns: repeat(4, 1fr);
      gap: 30px;
    }
  }

  .ai-featured-collection__product-{{ ai_gen_id }} {
    display: grid;
    grid-template-rows: auto 1fr;
    height: 100%;
  }

  .ai-featured-collection__image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    margin-bottom: 15px;
    overflow: hidden;
  }

  .ai-featured-collection__image-{{ ai_gen_id }} {
    width: 100%;
    height: auto;
    display: block;
  }

  .ai-featured-collection__image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 1;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-featured-collection__image-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-featured-collection__info-{{ ai_gen_id }} {
    display: grid;
    grid-template-rows: minmax({{ block.settings.title_min_height }}px, auto) auto 1fr;
    gap: {{ block.settings.card_spacing }}px;
    padding: {{ block.settings.card_padding }}px;
    background-color: {{ block.settings.card_background }};
    border-radius: {{ block.settings.card_border_radius }}px;
  }

  .ai-featured-collection__product-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_font_size }}px;
    margin: 0;
    color: {{ block.settings.product_name_color }};
    text-decoration: none;
    display: block;
    line-height: 1.4;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  .ai-featured-collection__product-title-{{ ai_gen_id }}:hover {
    opacity: 0.8;
  }

  .ai-featured-collection__price-wrapper-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    min-height: {{ block.settings.price_font_size | plus: 4 }}px;
  }

  .ai-featured-collection__price-{{ ai_gen_id }} {
    font-size: {{ block.settings.price_font_size }}px;
    font-weight: 600;
    color: {{ block.settings.price_color }};
  }

  .ai-featured-collection__compare-price-{{ ai_gen_id }} {
    font-size: {{ block.settings.compare_price_font_size }}px;
    text-decoration: line-through;
    color: {{ block.settings.compare_price_color }};
    opacity: 0.7;
  }

  .ai-featured-collection__button-wrapper-{{ ai_gen_id }} {
    display: flex;
    align-items: flex-end;
  }

  .ai-featured-collection__add-to-cart-{{ ai_gen_id }} {
    padding: {{ block.settings.button_padding }}px {{ block.settings.button_padding | times: 1.5 }}px;
    background-color: {{ block.settings.button_background }};
    color: {{ block.settings.button_text_color }};
    border: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    cursor: pointer;
    font-size: {{ block.settings.button_font_size }}px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: opacity 0.3s ease;
    width: 100%;
  }

  .ai-featured-collection__add-to-cart-{{ ai_gen_id }}:hover {
    opacity: 0.85;
  }

  .ai-featured-collection__add-to-cart-{{ ai_gen_id }}:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .ai-featured-collection__empty-state-{{ ai_gen_id }} {
    text-align: center;
    padding: 60px 20px;
    color: #666;
  }

  .ai-featured-collection__empty-state-{{ ai_gen_id }} p {
    margin: 10px 0;
    font-size: 16px;
  }
{% endstyle %}

<div class="ai-featured-collection-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.heading != blank %}
    <div class="ai-featured-collection__header-{{ ai_gen_id }}">
      <h2 class="ai-featured-collection__title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
    </div>
  {% endif %}

  {% if block.settings.collection != blank %}
    <div class="ai-featured-collection__grid-{{ ai_gen_id }}">
      {% for product in block.settings.collection.products limit: block.settings.products_to_show %}
        <div class="ai-featured-collection__product-{{ ai_gen_id }}">
          <a href="{{ product.url }}" class="ai-featured-collection__image-wrapper-{{ ai_gen_id }}">
            {% if product.featured_image %}
              <img
                src="{{ product.featured_image | image_url: width: 600 }}"
                alt="{{ product.featured_image.alt | escape }}"
                class="ai-featured-collection__image-{{ ai_gen_id }}"
                loading="lazy"
                width="{{ product.featured_image.width }}"
                height="{{ product.featured_image.height }}"
              >
            {% else %}
              <div class="ai-featured-collection__image-placeholder-{{ ai_gen_id }}">
                {{ 'product-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </a>

          <div class="ai-featured-collection__info-{{ ai_gen_id }}">
            <a href="{{ product.url }}" class="ai-featured-collection__product-title-{{ ai_gen_id }}">
              {{ product.title }}
            </a>

            <div class="ai-featured-collection__price-wrapper-{{ ai_gen_id }}">
              {% if product.compare_at_price > product.price %}
                <span class="ai-featured-collection__compare-price-{{ ai_gen_id }}">
                  {{ product.compare_at_price | money }}
                </span>
              {% endif %}
              <span class="ai-featured-collection__price-{{ ai_gen_id }}">
                {{ product.price | money }}
              </span>
            </div>

            <div class="ai-featured-collection__button-wrapper-{{ ai_gen_id }}">
              <form action="/cart/add" method="post" enctype="multipart/form-data" style="width: 100%;">
                <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                <button
                  type="submit"
                  class="ai-featured-collection__add-to-cart-{{ ai_gen_id }}"
                  {% unless product.available %}disabled{% endunless %}
                >
                  {% if product.available %}
                    {{ block.settings.button_text }}
                  {% else %}
                    Sold out
                  {% endif %}
                </button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="ai-featured-collection__empty-state-{{ ai_gen_id }}">
      <p>Next, select a collection to display products</p>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Featured collection",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Collection"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Featured collection"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to show",
      "default": 8
    },
    {
      "type": "header",
      "content": "Section style"
    },
    {
      "type": "color",
      "id": "section_background",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#151515"
    },
    {
      "type": "header",
      "content": "Product card"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "card_spacing",
      "min": 4,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Spacing between elements",
      "default": 8
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 0
    },
    {
      "type": "header",
      "content": "Product title"
    },
    {
      "type": "color",
      "id": "product_name_color",
      "label": "Color",
      "default": "#151515"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "title_min_height",
      "min": 30,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Minimum height",
      "default": 45
    },
    {
      "type": "header",
      "content": "Price"
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Color",
      "default": "#151515"
    },
    {
      "type": "range",
      "id": "price_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Compare at price"
    },
    {
      "type": "color",
      "id": "compare_price_color",
      "label": "Color",
      "default": "#666666"
    },
    {
      "type": "range",
      "id": "compare_price_font_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Add to cart button"
    },
    {
      "type": "inline_richtext",
      "id": "button_text",
      "label": "Text",
      "default": "Add to cart"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Background",
      "default": "#151515"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_padding",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Featured collection"
    }
  ]
}
{% endschema %}
